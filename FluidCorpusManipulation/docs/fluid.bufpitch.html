<!--
Part of the Fluid Corpus Manipulation Project (http://www.flucoma.org/)
Copyright 2017-2019 University of Huddersfield.
Licensed under the BSD-3 License.
See license.md file in the project root for full license information.
This project has received funding from the European Research Council (ERC)
under the European Union’s Horizon 2020 research and innovation programme
(grant agreement No 725899).
-->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./_c74_common.css">
<title>fluid.bufpitch Reference</title>
<style>
	* {
		font-family:system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
		--blue: rgb(80,164,252);
		--dark-blue: #204265;
	}

	body {
		padding: 1em;
	}

	h1 {
		text-decoration: underline;
		background-color: var(--blue);
		color: white;
		padding: 0.25em;
		margin: 0;
	}
	h2 {
		border-bottom: 0.5px solid rgba(128, 128, 128, 0.513);
	}

	a {
		color: var(--blue);
	}

	a:hover {
		background-color: var(--blue);
		color: white;
	}
	
	.type, .defaultval { 
		font-weight: normal; 
  }
</style> 
</head>
<body>
  <h1 class="ref_title">fluid.bufpitch</h1>
  <div class="digest">Pitch Descriptor</div>
  <section class="object_description">
    <h2>Description</h2> 
    
    <p>Three popular pitch descriptors, all of which compute frequency and the confidence that a pitch is present.</p>

    
  </section> 
  <section class="object_discussion"> 
    <h2>Discussion</h2> 
    
    <p><a href="fluid.pitch~.html">fluid.pitch~</a> returns both <code>pitch</code> and <code>confidence</code> values. When no pitch can be detected, a pitch of 0 Hz is returned (or -999.0 when the unit is in MIDI note mode).</p>
<p>For information about the pitch descriptor algorithms, see the <code>algorithm</code> parameter below.</p>
<p>The &quot;confidence&quot; output is a value between 0 and 1 indicating how confident the algorithm is in the pitch that it is reporting. In effect this can be an estimation of how &quot;noisy&quot; (closer to 0) or &quot;harmonic&quot; (closer to 1) the spectrum is. The confidence may also be low when a signal contains polyphony, as the algorithms are not intended for multiple pitch streams.</p>
<p>The <code>unit</code> argument indicates whether the pitch output should be in hertz (indicated by 0) or MIDI note numbers (indicated by 1). MIDI note numbers may be useful, not only because of their direct relationship to MIDI-based synthesis systems, but also because of the logarithmic relationship to hertz, making them perceptually evenly-spaced units (1 MIDI note = 1 semitone).</p>
<p>For more information visit <a class="reference external" href="https://learn.flucoma.org/reference/pitch/">https://learn.flucoma.org/reference/pitch/</a>.</p>


    <p>Read more about fluid.bufpitch on the <a href='https://learn.flucoma.org/reference/pitch'>learn platform</a>.</p>
    
    <p>fluid.bufpitch is part of the Fluid Decomposition Toolkit of the FluCoMa project. For more explanations, learning material, and discussions on its musicianly uses, visit <a href="http://www.flucoma.org/">flucoma.org</a>.</p>
  </section>
  <section class="argument_section">
    <h2>Arguments</h2></section> 
  <section class="attribute_section">
    <h2>Attributes</h2><div class="attribute_group">
      <h3 class="attribute_name">algorithm
        <span class="type"> [int]</span>
        <span class="defaultval"> (default: 2)</span>
      </h3>
      <div class="description"><p>The algorithm to estimate the pitch. The options are:</p>
</div><div class="enumvals">      
      <ol start='0'><li>
          <p>Cepstrum: Returns a pitch estimate as the location of the second highest peak in the Cepstrum of the signal (after DC).</p>

        </li><li>
          <p>Harmonic Product Spectrum: Implements the Harmonic Product Spectrum algorithm for pitch detection . See e.g. A. Lerch, &quot;An Introduction to Audio Content Analysis: Applications in Signal Processing and Music Informatics.&quot; John Wiley &amp; Sons, 2012.https://onlinelibrary.wiley.com/doi/book/10.1002/9781118393550</p>

        </li><li>
          <p>YinFFT: Implements the frequency domain version of the YIN algorithm, as described in P. M. Brossier, &quot;Automatic Annotation of Musical Audio for Interactive Applications.” QMUL, London, UK, 2007. See also <a class="reference external" href="https://essentia.upf.edu/documentation/reference/streaming_PitchYinFFT.html">https://essentia.upf.edu/documentation/reference/streaming_PitchYinFFT.html</a></p>

        </li></ol>
      </div><!--  -->
    </div><div class="attribute_group">
      <h3 class="attribute_name">features
        <span class="type"> [symbol]</span>
        <span class="defaultval"> (default: None)</span>
      </h3>
      <div class="description"><p>The destination buffer for the descriptors.</p>
</div><!--  -->
    </div><div class="attribute_group">
      <h3 class="attribute_name">fftsettings
        <span class="type"> [int]</span>
        <span class="defaultval"> (default: [[&#39;winSize&#39;, 1024], [&#39;hopSize&#39;, -1], [&#39;fftSize&#39;, -1]])</span>
      </h3>
      <div class="description"><p>FFT settings consist of three numbers representing the window size, hop size and FFT size in samples:</p>
<p>The hop size and fft size can both be set to -1 (and are by default), with slightly different meanings:</p>
<ul class="simple">
<li>For the hop size, -1 = <code>windowsize/2</code></li>
<li>For the FFT size, -1 = <code>windowsize</code> snapped to the nearest equal / greater power of 2 (e.g. <code>windowsize 1024</code> =&gt; <code>fftsize 1024</code>, but <code>windowssize 1000</code> also =&gt; <code>fftsize 1024</code>)</li>
</ul>
<p><strong>Constraints</strong></p>
<ul class="simple">
<li>FFTSize, if != -1, will snap to the next greatest power of two &amp;gt; 4</li>
<li>The maximum FFT size is limited to the value of the <code>maxfftsize</code> argument</li>
<li>if FFT size != -1, then window size is clipped at FFT size</li>
</ul>
</div><!--  -->
    </div><div class="attribute_group">
      <h3 class="attribute_name">maxfreq
        <span class="type"> [number]</span>
        <span class="defaultval"> (default: 10000.0)</span>
      </h3>
      <div class="description"><p>The maximum fundamental frequency that the algorithm withh search for. This sets the highest value that will be generated. The default is 10000.</p>
<p><strong>Constraints</strong></p>
<ul class="simple">
<li>Minimum: MAX(<code>minfreq, 1</code>)</li>
<li>Maximum: <code>20000</code></li>
</ul>
</div><!--  -->
    </div><div class="attribute_group">
      <h3 class="attribute_name">maxfftsize
        <span class="type"> [number]</span>
        <span class="defaultval"> (default: -1)</span>
      </h3>
      <div class="description"><p>Set an explicit upper bound on the FFT size at object instantiation. The default of -1 sets this to whatever the initial FFT size is</p>
</div><!--  -->
    </div><div class="attribute_group">
      <h3 class="attribute_name">minfreq
        <span class="type"> [number]</span>
        <span class="defaultval"> (default: 20.0)</span>
      </h3>
      <div class="description"><p>The minimum fundamental frequency that the algorithm withh search for. This sets the lowest value that will be generated. The default is 20.</p>
<p><strong>Constraints</strong></p>
<ul class="simple">
<li>Minimum: <code>0</code></li>
<li>Maximum: MIN(<code>maxfreq, 10000</code>)</li>
</ul>
</div><!--  -->
    </div><div class="attribute_group">
      <h3 class="attribute_name">numchans
        <span class="type"> [number]</span>
        <span class="defaultval"> (default: -1)</span>
      </h3>
      <div class="description"><p>For multichannel <code>source</code>, how many channels should be processed. The default of -1 indicates to analyse through the last channel in the buffer.</p>
</div><!--  -->
    </div><div class="attribute_group">
      <h3 class="attribute_name">numframes
        <span class="type"> [number]</span>
        <span class="defaultval"> (default: -1)</span>
      </h3>
      <div class="description"><p>How many samples to analyse. The default of -1 indicates to analyse through to the end of the buffer.</p>
</div><!--  -->
    </div><div class="attribute_group">
      <h3 class="attribute_name">padding
        <span class="type"> [int]</span>
        <span class="defaultval"> (default: 1)</span>
      </h3>
      <div class="description"><p>Controls the zero-padding added to either end of the source buffer or segment. Padding ensures all values are analysed. Possible values are:</p>
</div><div class="enumvals">      
      <ol start='0'><li>
          <p>No padding - The first analysis window starts at time 0, and the samples at either end will be tapered by the STFT windowing function.</p>

        </li><li>
          <p>Half the window size - The first sample is centred in the analysis window ensuring that the start and end of the segment are accounted for in the analysis.</p>

        </li><li>
          <p>Window size minus the hop size - Mode 2 can be useful when the overlap factor (window size / hop size) is greater than 2, to ensure that the input samples at either end of the segment are covered by the same number of analysis frames as the rest of the analysed material.</p>

        </li></ol>
      </div><!--  -->
    </div><div class="attribute_group">
      <h3 class="attribute_name">select
        <span class="type"> [symbol]</span>
        <span class="defaultval"> (default: [&#39;pitch&#39;, &#39;confidence&#39;])</span>
      </h3>
      <div class="description"><p>An array of <code>symbols</code> indicating which analyses to return. The options are <code>pitch</code> and <code>confidence</code>. If nothing is specified, the object will return all the analyses. The analyses will always appear in their normal order, this argument just allows for a selection of them to be returned. Reordering the options in this argument will not reorder how the analyses are returned.</p>
</div><!--  -->
    </div><div class="attribute_group">
      <h3 class="attribute_name">source
        <span class="type"> [symbol]</span>
        <span class="defaultval"> (default: None)</span>
      </h3>
      <div class="description"><p>The buffer to use as the source material to be pitch-tracked. The different channels of multichannel buffers will be processed sequentially.</p>
</div><!--  -->
    </div><div class="attribute_group">
      <h3 class="attribute_name">startchan
        <span class="type"> [number]</span>
        <span class="defaultval"> (default: 0)</span>
      </h3>
      <div class="description"><p>For multichannel <code>source</code>, from which channel to begin analysing. The default is 0.</p>
<p><strong>Constraints</strong></p>
<ul class="simple">
<li>Minimum: <code>0</code></li>
</ul>
</div><!--  -->
    </div><div class="attribute_group">
      <h3 class="attribute_name">startframe
        <span class="type"> [number]</span>
        <span class="defaultval"> (default: 0)</span>
      </h3>
      <div class="description"><p>Where in <code>source</code> to start the analysis, in samples. The default is 0.</p>
<p><strong>Constraints</strong></p>
<ul class="simple">
<li>Minimum: <code>0</code></li>
</ul>
</div><!--  -->
    </div><div class="attribute_group">
      <h3 class="attribute_name">unit
        <span class="type"> [int]</span>
        <span class="defaultval"> (default: 0)</span>
      </h3>
      <div class="description"><p>The unit of the estimated value. The default of 0 is in Hz. A value of 1 will convert to MIDI note values.</p>
</div><!--  -->
    </div><div class="attribute_group">
      <h3 class="attribute_name">warnings
        <span class="type"> [number]</span>
        <span class="defaultval"> (default: 0)</span>
      </h3>
      <div class="description"><p>Enable warnings to be issued whenever a parameter value is constrained (e.g. clipped)</p>
</div><!--  -->
    </div></section> 
  <section class="method_section"> 
    <h2>Messages</h2><div class="method_group">
      <h3 class="method_name" name="bang">bang</h3>
      <div class="description"> A bang will commence processing on object given its current settings, unless it is already busy. In that case, the behaviour depends on the value of the <span class="messagename" data-message="queue"> queue </span>
        attribute. </div>
    </div>
    <div class="method_group">
      <h3 class="method_name" name="cancel">cancel</h3>
      <div class="description"> When processing in non-blocking mode, this will cancel the job underway, without updating destination buffers. </div>
    </div><div class="method_group">
      <h3 class="method_name" name="reset">reset</h3>
      <div class="description"> Calling <span class="messagename" data-message="reset"> reset </span> will change parameter values back to those the object was <em> created </em> with, i.e. any attribute values set in the box will be retained </div>
    </div>
  </section> 
  <section class="seealso"> 
    <h2>See Also</h2><h3 class="seealso_name"><a href="fluid.pitch~.html">Pitch</a></h3><h3 class="seealso_name"><a href="fluid.bufloudness.html">BufLoudness</a></h3><h3 class="seealso_name"><a href="fluid.bufmelbands.html">BufMelBands</a></h3><h3 class="seealso_name"><a href="fluid.bufmfcc.html">BufMFCC</a></h3><h3 class="seealso_name"><a href="fluid.bufspectralshape.html">BufSpectralShape</a></h3><h3 class="seealso_name"><a href="fluid.bufstats.html">BufStats</a></h3></section> 
</body>
</html>